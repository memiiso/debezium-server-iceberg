
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://memiiso.github.io/debezium-server-iceberg/iceberg/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../icebergevents/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>iceberg Consumer - Debezium Server Iceberg Consumer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#debezium-iceberg-consumer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Debezium Server Iceberg Consumer" class="md-header__button md-logo" aria-label="Debezium Server Iceberg Consumer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Debezium Server Iceberg Consumer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              iceberg Consumer
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/memiiso/debezium-server-iceberg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  iceberg Consumer

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../icebergevents/" class="md-tabs__link">
        
  
  
    
  
  icebergevents Consumer

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../python-runner/" class="md-tabs__link">
        
  
  
    
  
  Python Runner

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../migration/" class="md-tabs__link">
        
  
  
    
  
  Migration Guideline

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../faq/" class="md-tabs__link">
        
  
  
    
  
  FAQ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Debezium Server Iceberg Consumer" class="md-nav__button md-logo" aria-label="Debezium Server Iceberg Consumer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Debezium Server Iceberg Consumer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/memiiso/debezium-server-iceberg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    iceberg Consumer
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    iceberg Consumer
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iceberg-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      
        iceberg Consumer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iceberg Consumer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration properties
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upsert-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Upsert Mode
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Upsert Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upsert-mode-data-deduplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Upsert Mode Data Deduplication
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upsert-mode-keeping-deleted-records" class="md-nav__link">
    <span class="md-ellipsis">
      
        Upsert Mode, Keeping Deleted Records
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#append-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Append Mode
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimizing-batch-size-or-commit-frequency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optimizing batch size (or commit frequency)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optimizing batch size (or commit frequency)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nobatchsizewait" class="md-nav__link">
    <span class="md-ellipsis">
      
        NoBatchSizeWait
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maxbatchsizewait" class="md-nav__link">
    <span class="md-ellipsis">
      
        MaxBatchSizeWait
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iceberg-table-naming-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        Iceberg Table Naming Rule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-partitioning-with-partition-by" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table Partitioning with partition-by
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Partitioning with partition-by">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debezium-offset-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debezium Offset Storage
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debezium-database-history-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debezium Database History Storage
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debezium-event-flattening" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debezium Event Flattening
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-iceberg" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuring iceberg
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring iceberg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-schema-change-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automatic Schema Change Handling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatic Schema Change Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-column-to-source-table-a-column-missing-in-destination-iceberg-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding new column to source table (A column missing in destination iceberg table)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding new column to source table (A column missing in destination iceberg table)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-debeziumsinkicebergallow-field-addition-is-false" class="md-nav__link">
    <span class="md-ellipsis">
      
        When debezium.sink.iceberg.allow-field-addition is false
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-debeziumsinkicebergallow-field-addition-is-true" class="md-nav__link">
    <span class="md-ellipsis">
      
        When debezium.sink.iceberg.allow-field-addition is true
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-column-from-the-source-table-an-extra-column-in-iceberg-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Removing a column from the source table (An extra column in iceberg table)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renaming-a-column-in-the-source-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        Renaming a column in the source table
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-mismatching-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Handling Mismatching Data Types
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling Mismatching Data Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-debeziumsinkicebergallow-field-addition-is-true_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        When debezium.sink.iceberg.allow-field-addition is true:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-debeziumsinkicebergallow-field-addition-is-false_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        When debezium.sink.iceberg.allow-field-addition is false:
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../icebergevents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    icebergevents Consumer
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python Runner
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration Guideline
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="debezium-iceberg-consumer">Debezium Iceberg Consumer</h1>
<p>Directly replicate database Change Data Capture (CDC) events to Iceberg tables on cloud storage or HDFS, eliminating the
need for intermediate systems like Spark, Kafka, or streaming platforms.
<img alt="debezium-iceberg.png" src="../images/debezium-iceberg.png" /></p>
<h2 id="iceberg-consumer"><code>iceberg</code> Consumer</h2>
<p>The Iceberg consumer replicates database Change Data Capture (CDC) events to target Iceberg tables. It supports both upsert and append modes for data replication.</p>
<p>When event and key schema information is enabled (<code>debezium.format.value.schemas.enable=true</code> and <code>debezium.format.key.schemas.enable=true</code>), the destination Iceberg tables are automatically created upon the initial startup.</p>
<h4 id="configuration-properties">Configuration properties</h4>
<table>
<thead>
<tr>
<th>Config</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>debezium.sink.type</code></td>
<td><code>iceberg</code></td>
<td>Debezium server coniguration, must be set to <code>iceberg</code> activates the iceberg consumer.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.warehouse</code></td>
<td></td>
<td>Root path of the Iceberg data warehouse</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.io-impl</code></td>
<td><code>org.apache.iceberg.io.ResolvingFileIO</code></td>
<td>Iceberg file io implementation. Used to write iceberg data files.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.catalog-name</code></td>
<td><code>default</code></td>
<td>User-specified Iceberg catalog name.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.table-namespace</code></td>
<td><code>default</code></td>
<td>A namespace in the catalog. ex: <code>SELECT * FROM prod.db.table --&gt; catalog: prod, namespace: db, table: table</code></td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.table-prefix</code></td>
<td>``</td>
<td>Prefix for Iceberg tables. A prefix added to the names of Iceberg tables.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.write.format.default</code></td>
<td><code>parquet</code></td>
<td>Default file format for Iceberg tables: <code>parquet</code>, <code>avro</code>, or <code>orc</code></td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.allow-field-addition</code></td>
<td><code>true</code></td>
<td>Allow field addition to target tables. Enables automatic schema evolution, expansion.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.upsert</code></td>
<td><code>false</code></td>
<td>Upsert mode overwrites updated rows. Any existing rows that are updated will be overwritten with the new values. Explained further below.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.upsert-keep-deletes</code></td>
<td><code>true</code></td>
<td>When running in upsert mode, deleted rows are marked as deleted but retained in the target table (soft delete)</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.upsert-dedup-column</code></td>
<td>``</td>
<td>With upsert mode this field can be used to deduplicate data. If it's set the row with the greatest value of the field is retained.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.upsert-op-field</code></td>
<td><code>__op</code></td>
<td>Field name for operation type in upsert mode. <em>dont change!</em></td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.nested-as-variant</code></td>
<td><code>false</code></td>
<td>When true, all nested data is stored in Iceberg variant fields, allowing schema changes to be absorbed directly within these fields.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.create-identifier-fields</code></td>
<td><code>true</code></td>
<td>When set to <code>false</code>, the consumer will create tables without identifier fields. This is useful for scenarios where users want to consume nested events in append-only mode.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.table-mapper</code></td>
<td><code>default-mapper</code></td>
<td>Mapping strategy between source table names and their corresponding Iceberg table names. Currently, only <code>default-mapper</code> implementation is provided.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.destination-regexp</code></td>
<td>``</td>
<td>A regular expression used to modify the destination Iceberg table name. This setting allows for combining multiple tables, such as <code>table_ptt1</code> and <code>table_ptt2</code>, into a single table, <code>table_combined</code>.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.destination-regexp-replace</code></td>
<td>``</td>
<td>Replace part of the regexp for modifying destination Iceberg table names</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.destination-uppercase-table-names</code></td>
<td><code>false</code></td>
<td>Creates uppercase Iceberg table names</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.destination-lowercase-table-names</code></td>
<td><code>false</code></td>
<td>Creates lowercase Iceberg table names</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.preserve-required-property</code></td>
<td><code>false</code></td>
<td>When translating schema from source to Iceberg, by default, only primary key columns are defined as required; the rest of the columns become optional. When this is set to <code>true</code>, the columns preserve their original required/optional property.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.partition-by</code></td>
<td>``</td>
<td>Comma-separated list of partition fields to use when creating the table.</td>
</tr>
<tr>
<td><code>debezium.sink.batch.batch-size-wait</code></td>
<td><code>NoBatchSizeWait</code></td>
<td>Batch size wait strategy: Controls the size of data files and the frequency of uploads. Explained below.</td>
</tr>
<tr>
<td><code>debezium.sink.batch.concurrent-uploads</code></td>
<td><code>1</code></td>
<td>The number of parallel threads to use for uploading data to Iceberg tables. When set to a value greater than 1, the consumer will write to multiple tables concurrently.</td>
</tr>
<tr>
<td><code>debezium.sink.batch.concurrent-uploads.timeout-minutes</code></td>
<td><code>60</code></td>
<td>The maximum time in minutes to wait for all parallel uploads to complete before timing out. This is only effective when <code>debezium.sink.batch.concurrent-uploads</code> is greater than 1.</td>
</tr>
<tr>
<td><code>debezium.sink.iceberg.{iceberg.prop.name}</code></td>
<td></td>
<td><a href="https://iceberg.apache.org/docs/latest/configuration/">Iceberg config</a> These Iceberg settings are passed to Iceberg without the <code>debezium.sink.iceberg.</code> prefix.</td>
</tr>
<tr>
<td><code>debezium.source.offset.storage</code></td>
<td><code>io.debezium.server.iceberg.offset.IcebergOffsetBackingStore</code></td>
<td>The name of the Java class that is responsible for persistence of connector offsets. see <a href="https://debezium.io/documentation/reference/stable/development/engine.html#advanced-consuming">debezium doc</a>. Set to <code>io.debezium.server.iceberg.offset.IcebergOffsetBackingStore</code> to use Iceberg table</td>
</tr>
<tr>
<td><code>debezium.source.offset.storage.iceberg.table-name</code></td>
<td><code>_debezium_offset_storage</code></td>
<td>Destination Iceberg table name to store connector offset information.</td>
</tr>
<tr>
<td><code>debezium.source.schema.history.internal</code></td>
<td><code>io.debezium.server.iceberg.history.IcebergSchemaHistory</code></td>
<td>The name of the Java class that is responsible for persistence of the database schema history. see <a href="https://debezium.io/documentation/reference/stable/development/engine.html#database-history-properties">debezium doc</a>. Set to <code>io.debezium.server.iceberg.history.IcebergSchemaHistory</code> to use Iceberg table.</td>
</tr>
<tr>
<td><code>debezium.source.schema.history.internal.iceberg.table-name</code></td>
<td><code>_debezium_database_history_storage</code></td>
<td>Destination Iceberg table name to store database schema history information.</td>
</tr>
<tr>
<td><code>debezium.source.time.precision.mode</code></td>
<td><code>isostring</code></td>
<td>Mode for temporal precision handling in Debezium source.</td>
</tr>
<tr>
<td><code>debezium.source.decimal.handling.mode</code></td>
<td><code>double</code></td>
<td>Mode for handling decimal values in the relational database connector.</td>
</tr>
<tr>
<td><code>debezium.format.value</code></td>
<td><code>connect</code></td>
<td>Format of the event value. one of {<code>json</code>, <code>connect</code>}.</td>
</tr>
<tr>
<td><code>debezium.format.key</code></td>
<td><code>connect</code></td>
<td>Format of the event key. one of {<code>json</code>, <code>connect</code>}.</td>
</tr>
<tr>
<td><code>debezium.format.value.schemas.enable</code></td>
<td><code>true</code></td>
<td>Enable schema inclusion in the event value format.</td>
</tr>
<tr>
<td><code>debezium.format.key.schemas.enable</code></td>
<td><code>true</code></td>
<td>Enable schema inclusion in the event key format.</td>
</tr>
<tr>
<td><code>debezium.transforms</code></td>
<td><code>unwrap</code></td>
<td>Enables Debezium transforms for event processing.</td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.type</code></td>
<td><code>io.debezium.transforms.ExtractNewRecordState</code></td>
<td>Type of the Debezium unwrap transform.</td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.add.fields</code></td>
<td><code>op,table,source.ts_ns,db,ts_ms</code></td>
<td>List of fields to add in the Debezium unwrap transform.</td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.delete.tombstone.handling.mode</code></td>
<td><code>rewrite</code></td>
<td>Handling mode for delete events in the Debezium unwrap transform.</td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.drop.tombstones</code></td>
<td><code>true</code></td>
<td>Handling mode for tombstone events (delete markers) in the Debezium unwrap transform.</td>
</tr>
<tr>
<td><code>quarkus.log.level</code></td>
<td><code>INFO</code></td>
<td>Global Quarkus logging level</td>
</tr>
</tbody>
</table>
<h3 id="upsert-mode">Upsert Mode</h3>
<p>When enabled, (<code>debezium.sink.iceberg.upsert=true</code>) the
consumer utilizes the source table's primary key to perform upsert operations on the target Iceberg table, effectively
deleting existing rows and inserting updated ones. For tables lacking a primary key, the consumer reverts to append-only
mode.</p>
<h4 id="upsert-mode-data-deduplication">Upsert Mode Data Deduplication</h4>
<p>Upsert mode enables data deduplication. By default only the latest record in a batch is retained for each primary key,
since by default Debezium produces events in the order in which they were obtained from the database.
The <code>debezium.sink.iceberg.upsert-dedup-column</code> property can be used to specify a column for deduplication
(currently limited to Long type). If it's set the record with the greatest value of the column is retained.</p>
<p>When two records with the same key and value of the specified column are received,
the record with the higher priority operation type is retained and added to the destination table, while the duplicate record is discarded.
Operation type priorities are as follows: <code>c</code> (create) &gt; <code>r</code> (read) &gt; <code>u</code> (update) &gt; <code>d</code> (delete).</p>
<h4 id="upsert-mode-keeping-deleted-records">Upsert Mode, Keeping Deleted Records</h4>
<p>By default, <code>debezium.sink.iceberg.upsert-keep-deletes=true</code> retains deleted records in the Iceberg table. Setting this
property to false will remove deleted records from the destination table.</p>
<p>By keeping deleted records, the consumer can effectively implement soft deletes, marking records as deleted (<code>__deleted</code>
set to <code>true</code>) while preserving their last known state in the Iceberg table.</p>
<h3 id="append-mode">Append Mode</h3>
<p>Default mode, when <code>debezium.sink.iceberg.upsert=false</code> switches the operation mode to append-only. In append-only mode, data
deduplication is not performed, and all incoming records are appended to the destination table.</p>
<p>It's important to note that even when upsert mode is enabled, tables without a primary key will switch to append-only
behavior.</p>
<h2 id="optimizing-batch-size-or-commit-frequency">Optimizing batch size (or commit frequency)</h2>
<p>Debezium's real-time extraction of database events can lead to frequent commits and the creation of numerous small
files, which can negatively impact performance, especially when near-real-time data feeds are sufficient.</p>
<p>To address this, the connector offers various batch size wait strategies to optimize batch size and interval. These
strategies introduce a delay between consumer calls, allowing for the accumulation of more events per call. This
approach can significantly improve performance by reducing the number of commits and file operations.</p>
<p>To fine-tune this behavior, the <code>debezium.source.max.queue.size</code> and <code>debezium.source.max.batch.size</code> properties should
be configured in conjunction with the batch size wait strategy`. See the examples below.</p>
<h4 id="nobatchsizewait">NoBatchSizeWait</h4>
<p>This is default configuration by default consumer will not use any wait. All the events are consumed immediately.
<code>debezium.sink.batch.batch-size-wait=NoBatchSizeWait</code></p>
<h4 id="maxbatchsizewait">MaxBatchSizeWait</h4>
<p>The MaxBatchSizeWait strategy leverages Debezium metrics to optimize batch size. It periodically checks the streaming
queue size and waits until it reaches the specified <code>debezium.source.max.batch.size</code> or
<code>debezium.sink.batch.batch-size-wait.max-wait-ms</code>. The maximum wait time and check interval are controlled by the
<code>debezium.sink.batch.batch-size-wait.max-wait-ms</code> and <code>debezium.sink.batch.batch-size-wait.wait-interval-ms</code> properties,
respectively.</p>
<p>For instance, to process 2048 events per commit with a maximum wait time of 30 seconds and a check interval of 5
seconds, you would configure the settings as follows:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="na">debezium.sink.batch.batch-size-wait</span><span class="o">=</span><span class="s">MaxBatchSizeWait</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="na">debezium.source.connector.class</span><span class="o">=</span><span class="s">io.debezium.connector.postgresql.PostgresConnector</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="na">debezium.source.max.batch.size</span><span class="o">=</span><span class="s">2048</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="na">debezium.source.max.queue.size</span><span class="o">=</span><span class="s">16000</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="na">debezium.sink.batch.batch-size-wait.max-wait-ms</span><span class="o">=</span><span class="s">30000</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="na">debezium.sink.batch.batch-size-wait.wait-interval-ms</span><span class="o">=</span><span class="s">5000</span>
</span></code></pre></div>
<h3 id="iceberg-table-naming-rule">Iceberg Table Naming Rule</h3>
<p>Iceberg tables follow a specific naming format: <code>table-namespace</code>.<code>table-prefix``database.server.name</code>
<em><code>source_database_name</code></em><code>source_table_name</code></p>
<p>For example:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="na">debezium.sink.iceberg.table-namespace</span><span class="o">=</span><span class="s">default</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="na">database.server.name</span><span class="o">=</span><span class="s">testc</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="na">debezium.sink.iceberg.table-prefix</span><span class="o">=</span><span class="s">cdc_</span>
</span></code></pre></div>
<p>With the configuration described above, the database table  <code>inventory.customers</code> will be replicated to the Iceberg
table <code>default.testc_cdc_inventory_customers</code>.</p>
<h3 id="table-partitioning-with-partition-by">Table Partitioning with <code>partition-by</code></h3>
<p>The Debezium Iceberg consumer supports flexible table partitioning using the <code>debezium.sink.iceberg.partition-by</code> configuration.</p>
<p>When creating a new Iceberg table, the consumer determines the partitioning strategy as follows:</p>
<ol>
<li><b>Global Partitioning</b>: If the property <code>debezium.sink.iceberg.partition-by</code> is set, consumer uses it to partition all the tables.</li>
<li><b>Unpartitioned Tables</b>: If the global <code>partition-by</code> property is not set, the table will be created as unpartitioned.</li>
</ol>
<blockquote>
<p>If an invalid or unsupported transform is provided, table will be created as unpartitioned.</p>
</blockquote>
<h4 id="configuration">Configuration</h4>
<p>You can specify partitioning at the global level.
Examples:
<div class="language-properties highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Partition all tables by a single field</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="na">debezium.sink.iceberg.partition-by</span><span class="o">=</span><span class="s">country</span>
</span></code></pre></div></p>
<p>The value is a comma-separated list of field names or transform expressions. Supported transforms include:
* <code>year(field)</code>, <code>month(field)</code>, <code>day(field)</code>, <code>hour(field)</code>
* <code>bucket(field, N)</code>, <code>truncate(field, N)</code></p>
<p>Examples
<div class="language-properties highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Identity partitioning (by field)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="na">debezium.sink.iceberg.partition-by</span><span class="o">=</span><span class="s">category</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># Partition by year and month of a timestamp field</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="na">debezium.sink.iceberg.partition-by</span><span class="o">=</span><span class="s">year(event_time),month(event_time)</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1"># Bucket partitioning</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="na">debezium.sink.iceberg.partition-by</span><span class="o">=</span><span class="s">bucket(user_id, 16)</span>
</span></code></pre></div>
See the <a href="#https://iceberg.apache.org/docs/latest/partitioning/">Iceberg documentation</a> for more details on partition transforms.</p>
<h2 id="debezium-offset-storage">Debezium Offset Storage</h2>
<p>This implementation persists CDC offset to an Iceberg table. Debezium concurrently tracks source offset to monitor
binlog position.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>debezium.source.offset.storage=io.debezium.server.iceberg.offset.IcebergOffsetBackingStore
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>debezium.source.offset.storage.iceberg.table-name=debezium_offset_storage_table
</span></code></pre></div>
<h2 id="debezium-database-history-storage">Debezium Database History Storage</h2>
<p>Stores database change history in Iceberg table.</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="na">debezium.source.database.history</span><span class="o">=</span><span class="s">io.debezium.server.iceberg.history.IcebergSchemaHistory</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="na">debezium.source.database.history.iceberg.table-name</span><span class="o">=</span><span class="s">debezium_database_history_storage_table</span>
</span></code></pre></div>
<h2 id="debezium-event-flattening">Debezium Event Flattening</h2>
<p>For an optimal experience, it is recommended to enable event flattening in the consumer configuration. For detailed
information on message transformations, please refer to
the <a href="https://debezium.io/documentation/reference/stable/development/engine.html#engine-message-transformations">Debezium documentation</a>.</p>
<p><strong>Example Event Flattening Setting:</strong>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="na">debezium.transforms</span><span class="o">=</span><span class="s">unwrap</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="na">debezium.transforms.unwrap.type</span><span class="o">=</span><span class="s">io.debezium.transforms.ExtractNewRecordState</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="na">debezium.transforms.unwrap.add.fields</span><span class="o">=</span><span class="s">op,table,source.ts_ns,db</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="na">debezium.transforms.unwrap.add.headers</span><span class="o">=</span><span class="s">db</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="na">debezium.transforms.unwrap.delete.tombstone.handling.mode</span><span class="o">=</span><span class="s">rewrite</span>
</span></code></pre></div></p>
<p>When event flattening is disabled, the Iceberg consumer can only operate in append-only mode. Upsert mode and the
creation of identifier fields are not supported in this configuration.</p>
<p><strong>Settings for Running the Consumer Without Event Flattening:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>debezium.sink.iceberg.upsert=false
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>debezium.sink.iceberg.create-identifier-fields=false
</span></code></pre></div></p>
<h2 id="configuring-iceberg">Configuring iceberg</h2>
<p>All properties prefixed with <code>debezium.sink.iceberg.__ICEBERG_CONFIG__</code> are directly passed to Iceberg and hadoopConf.</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="na">debezium.sink.iceberg.{iceberg.prop.name}</span><span class="o">=</span><span class="s">xyz-value # passed to iceberg!</span>
</span></code></pre></div>
<h3 id="example-configuration">Example Configuration</h3>
<p>See <a href="..%2Fdebezium-server-iceberg-dist%2Fsrc%2Fmain%2Fresources%2Fdistro%2Fconfig%2Fapplication.properties.example">application.properties.example</a></p>
<h2 id="automatic-schema-change-handling">Automatic Schema Change Handling</h2>
<p>Source systems often undergo schema changes, which can involve adding new fields, removing existing ones, or modifying
the structure of existing fields. This document outlines the anticipated schema changes and how the system currently
handles them.</p>
<p><strong>Important Note:</strong> While full schema evaluation is not currently supported, the system can accommodate schema
expansions, such as adding new fields or expanding existing field data type. To enable this behavior, set the
<code>debezium.sink.iceberg.allow-field-addition</code> configuration property to <code>true</code>.</p>
<h4 id="adding-new-column-to-source-table-a-column-missing-in-destination-iceberg-table">Adding new column to source table (A column missing in destination iceberg table)</h4>
<h6 id="when-debeziumsinkicebergallow-field-addition-is-false">When <code>debezium.sink.iceberg.allow-field-addition</code> is <code>false</code></h6>
<p>New columns added to the source table are not automatically reflected in the destination Iceberg table. Data associated
with these new columns will be ignored until the corresponding columns are manually added to the destination table
schema.</p>
<h6 id="when-debeziumsinkicebergallow-field-addition-is-true">When <code>debezium.sink.iceberg.allow-field-addition</code> is <code>true</code></h6>
<p>New columns are automatically added to the destination Iceberg table and populated with corresponding data. This
behavior is handled automatically by the consumer.</p>
<h4 id="removing-a-column-from-the-source-table-an-extra-column-in-iceberg-table">Removing a column from the source table (An extra column in iceberg table)</h4>
<p>After a column is removed from the source table, the corresponding column in the destination Iceberg table will continue
to exist. However, new records will have null values for that column.</p>
<h4 id="renaming-a-column-in-the-source-table">Renaming a column in the source table</h4>
<p>Renaming a column in the source table is a combination of the two scenarios described above:</p>
<ol>
<li><strong>Old Column:</strong> The old column will continue to exist in the destination table, but new records will have null values
   for that column.</li>
<li><strong>New Column:</strong> The new column will need to be added to the destination table schema, either automatically by the
   consumer or manually. Once added, it will be populated with the appropriate data from the source.</li>
</ol>
<h4 id="handling-mismatching-data-types">Handling Mismatching Data Types</h4>
<p>The system has limited support for schema changes that involve mismatching data types. While safe data type expansions,
such as converting
int to long, are supported, conversions that could lead to data loss, such as converting decimal to int, are not.</p>
<h6 id="when-debeziumsinkicebergallow-field-addition-is-true_1">When <code>debezium.sink.iceberg.allow-field-addition</code> is <code>true</code>:</h6>
<p>In this scenario, consumer attempts to automatically adjust the data types of destination fields to accommodate changes
in the source schema. However, incompatible conversions, such as converting a float to an integer, are not supported,
Consumer will throw exception. Safe conversions, such as converting an int to a double, are allowed.</p>
<h6 id="when-debeziumsinkicebergallow-field-addition-is-false_1">When <code>debezium.sink.iceberg.allow-field-addition</code> is <code>false</code>:</h6>
<p><em>In this scenario, the consumer attempts to convert source field values to the target data type using Jackson. If
Jackson cannot successfully perform the conversion, a default value is returned by jackson.</em></p>
<p>Jackson conversion rule for Long type:
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Method that will try to convert value of this node to a Java long. Numbers are coerced using default Java rules; booleans convert to 0 (false) and 1 (true), and Strings are parsed using default Java language integer parsing rules.
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>If representation cannot be converted to a long (including structured types like Objects and Arrays), default value of 0 will be returned; no exceptions are thrown.
</span></code></pre></div></p>
<p>Jackson conversion rule for boolean type:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Method that will try to convert value of this node to a Java boolean. JSON booleans map naturally; integer numbers other than 0 map to true, and 0 maps to false and Strings &#39;true&#39; and &#39;false&#39; map to corresponding values.
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>If representation can not be converted to a boolean value (including structured types like Objects and Arrays), specified defaultValue will be returned; no exceptions are thrown.
</span></code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.indexes", "navigation.tabs", "toc.integrate", "content.code.copy", "content.tabs.link"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>